<html>
<head>
  <title>Trapping Rain Water</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/274061; Windows/6.2.9200;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="1766"/>
<h1>Trapping Rain Water</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/6/16 17:58</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/6/16 18:11</i></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);">Given <i style="box-sizing: border-box;">n</i> non-negative integers representing an elevation map where the width of each bar is 1, compute how much water it is able to trap after raining.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);">For example, <br style="box-sizing: border-box;"/>
Given <code style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); white-space: nowrap; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">[0,1,0,2,1,0,1,3,2,1,2,1]</code>, return <code style="box-sizing: border-box; font-family: Monaco, Menlo, Consolas, 'Courier New', monospace; font-size: 13px; padding: 2px 4px; color: rgb(199, 37, 78); white-space: nowrap; background-color: rgb(249, 242, 244); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px;">6</code>.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);"><img src="http://www.leetcode.com/wp-content/uploads/2012/08/rainwatertrap.png" style="cursor: default;cursor: default;"></img><br style="box-sizing: border-box;"/></p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; line-height: 30px; background-color: rgb(255, 255, 255); font-size: 11px;">The above elevation map is represented by array [0,1,0,2,1,0,1,3,2,1,2,1]. In this case, 6 units of rain water (blue section) are being trapped. <b style="box-sizing: border-box;">Thanks Marcos</b> for contributing this image!</p></div><div>近似两遍遍历</div><div align="left"><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Solution</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">   </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">trap</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">water</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>==</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>++)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>])</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                water</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getWater</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>!=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">end</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">end</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>--)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>])</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                    water</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getWater</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">smaller</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                    smaller</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">water</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getWater</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">r</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">water</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">horizontal</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">r</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>?</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>:</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">r</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>];</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">r</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">2</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>||</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">horizontal</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>==</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">r</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>++)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            water</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">horizontal</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">A</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>];</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">water</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div>一遍遍历的解法</div><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: rgb(255, 255, 255);">I got a method that can solve this problem with one pass and constant space,one point starts from left,another starts from right,and store the level at present,calculate the area of rectangle &quot;all&quot;,and remove the area of block &quot;block&quot;.It's the answer. My English is poor,here is my code.</p><pre style="box-sizing: border-box; font-family: 'small Monaco', Menlo, Consolas, 'Courier New', monospace; font-size: 12px; white-space: normal; padding: 0px; margin-top: 0px; margin-bottom: 10px; line-height: 1.428571429; color: rgb(51, 51, 51); word-break: break-all; word-wrap: break-word; background-color: rgb(238, 238, 238); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 3px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; overflow: auto; width: 600px; max-height: 600px; text-align: left;"><code style="box-sizing: border-box; font-family: 'small Monaco', Menlo, Consolas, 'Courier New', monospace; font-size: inherit; padding: 8px; color: black; white-space: pre; background-color: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 0px; display: block; float: left;">    <span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">class</span> <span style="box-sizing: border-box; color: rgb(136, 0, 0); font-weight: bold;">Solution</span> {</span> 
    <span style="box-sizing: border-box; font-weight: bold;">public</span>:   
       <span style="box-sizing: border-box; font-weight: bold;">int</span> trap(<span style="box-sizing: border-box; font-weight: bold;">int</span> A[], <span style="box-sizing: border-box; font-weight: bold;">int</span> n) {
        <span style="box-sizing: border-box; font-weight: bold;">if</span>(n==<span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>) <span style="box-sizing: border-box; font-weight: bold;">return</span> <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>;
        <span style="box-sizing: border-box; font-weight: bold;">int</span> l = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>, r = n-<span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>,block = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>,all = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>,curlevel = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>;
        <span style="box-sizing: border-box; font-weight: bold;">while</span>(l&lt;=r)
        {
            <span style="box-sizing: border-box; font-weight: bold;">if</span>(min(A[l],A[r])&gt;curlevel) 
            {
                all += (min(A[l],A[r])-curlevel)*(r-l+<span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>);
                curlevel = min(A[l],A[r]);
            }
            <span style="box-sizing: border-box; font-weight: bold;">if</span>(A[l]&lt;A[r]) 
                block += A[l++];
            <span style="box-sizing: border-box; font-weight: bold;">else</span> 
                block += A[r--];
        }
        <span style="box-sizing: border-box; font-weight: bold;">return</span> all-block;
    }
};</code></pre></div><div><br/></div></div>
</div></body></html> 