<html>
<head>
  <title>Candy</title>
  <basefont face="微软雅黑" size="2" />
  <meta http-equiv="Content-Type" content="text/html;charset=utf-8" />
  <meta name="exporter-version" content="Evernote Windows/274061; Windows/6.2.9200;"/>
  <style>
    body, td {
      font-family: 微软雅黑;
      font-size: 10pt;
    }
  </style>
</head>
<body>
<a name="2096"/>
<h1>Candy</h1>
<div>
<table bgcolor="#D4DDE5" border="0">
<tr><td><b>创建时间：</b></td><td><i>2014/7/6 21:13</i></td></tr>
<tr><td><b>更新时间：</b></td><td><i>2014/7/6 21:28</i></td></tr>
</table>
</div>
<br/>

<div>
<div style="word-wrap: break-word; -webkit-nbsp-mode: space; -webkit-line-break: after-white-space;"><div><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);">There are <i style="box-sizing: border-box;">N</i> children standing in a line. Each child is assigned a rating value.</p><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);">You are giving candies to these children subjected to the following requirements:</p><ul style="box-sizing: border-box; margin-top: 0px; margin-bottom: 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);"><li style="box-sizing: border-box;">Each child must have at least one candy.</li><li style="box-sizing: border-box;">Children with a higher rating get more candies than their neighbors.</li></ul><p style="box-sizing: border-box; margin: 0px 0px 10px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 30px; background-color: rgb(255, 255, 255);">What is the minimum candies you must give?</p></div><div>用红黑树 ，on 和o2n</div><div align="left"><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">class</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Solution</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">   </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">public</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">candy</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>==</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>||</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>==</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        Map</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">List</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;&gt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">reverseTable</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">TreeMap</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">List</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;&gt;();</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">num</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>];</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>++)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            List</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">reverseTable</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">get</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>==</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>null</b></span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>new</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ArrayList</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;();</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            l</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">add</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            reverseTable</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">put</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>],</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">l</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        Iterator</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">List</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Integer</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;&gt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">it</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">reverseTable</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">values</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>().</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">iterator</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>();</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        it</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">next</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>();</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">total</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>while</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">it</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">hasNext</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>())</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>for</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>:</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">it</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">next</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>())</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                num</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getMinByNeighbor</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">num</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">                total</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">num</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>];</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">total</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt"><br/></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">private</span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">getMinByNeighbor</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[]</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">num</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>)</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>{</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#8000FF" face="Courier New" size="2"><span style="font-size:10pt">int</span></font> <font face="Courier New" size="2"><span style="font-size:10pt">min</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">num</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>];</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>!=</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">0</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&amp;&amp;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&gt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>])</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            min</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Math</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">max</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">num</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">min</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>if</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">length</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>-</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">2</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&amp;&amp;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>&lt;</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">ratings</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>])</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">            min</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>=</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">Math</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>.</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">max</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>(</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">num</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>[</b></span></font><font face="Courier New" size="2"><span style="font-size:10pt">i</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>]</b></span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>+</b></span></font> <font color="#FF8000" face="Courier New" size="2"><span style="font-size:10pt">1</span></font> <font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>,</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">min</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>);</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">        </span></font> <font color="#0000FF" face="Courier New" size="2"><span style="font-size:10pt"><b>return</b></span></font> <font face="Courier New" size="2"><span style="font-size:10pt">min</span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>;</b></span></font></div><div align="left"><font face="Courier New" size="2"><span style="font-size:10pt">    </span></font><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div align="left"><font color="#000080" face="Courier New" size="2"><span style="font-size:10pt"><b>}</b></span></font></div><div>贪心：两次遍历和on</div><div>这题本身可以用贪心法来做，我们用candy[n]表示每个孩子的糖果数，遍历过程中，如果孩子i+1的rate大于孩子i 的rate，那么当前最好的选择自然是：给孩子i+1的糖果数=给孩子i的糖果数+1</div><div>如果孩子i+1的rate小于等于孩子i 的rate咋整？这个时候就不大好办了，因为我们不知道当前最好的选择是给孩子i+1多少糖果。</div><div>解决方法是：暂时不处理这种情况。等数组遍历完了，我们再一次从尾到头遍历数组，这回逆过来贪心，就可以处理之前略过的孩子。</div><div>最后累加candy[n]即得到最小糖果数。</div><div>这种解法是需要O(n)的辅助空间给candy[]的。</div><div><br/></div><div>一次遍历和常数</div><div>请回想一下：我们为什么需要辅助空间？当孩子的rate是一个非递减曲线的时候，我们是不需要辅助空间的，比如5个孩子的rate分别是1，2，5，7，10。那么糖果数自然是1，2，3，4，5。又如5个孩子的rate分别是1，2，5，5，10，那么糖果数自然是1，2，3，1，2。</div><div>因此如果rate是非递减数列，我们可以精确计算出当前孩子应该给多少糖果，把这个糖果数加入总数即可。</div><div>当孩子的rate出现递减的情况该如何是好？不用辅助空间能处理吗？</div><div>假设5个孩子的rate是 1，5，4，3，2。我们这样计算：遍历时，第一个孩子依然糖果为1，第二个孩子糖果为2，第三个孩子糖果给几个？我们遍历到后面就会知道第二个孩子给的糖果太少了，应该给4个。有没有办法在遍历到后面时，能计算出一个修正值，使得加上这个修正值，正好依然可以使总糖果数是正确的？</div><div>其实这个修正值不难计算，因为可以发现递减数列的长度决定了第二个孩子该给几个糖果。仔细观察：遍历到第四个孩子时我们知道了第二个孩子不该给2，应该给3，因此Total 要 +=1；遍历到第五个孩子我们知道了第二个孩子不该给3得给4，因此Total 要 += 1。我们设一个变量beforeDenc表示进入递减序列之前的那个孩子给的糖果值，再设置length用来表达当前递减序列的长度。这两个变量就可以决定Total是不是要修正：当遍历第三个孩子的时候 beforeDenc = 2，以后每遍历一个孩子，因为length已经超过了beforeDenc，每次Total都要额外+1，来修正第二个孩子的糖果数。</div><div>对于后面三个孩子，我们可以这样计算：遍历到第三个孩子，因为这是递减数列的第二个数字，我们Total += 1；第四个孩子是递减数列的第三个数字，Total += 2；第五个孩子是递减数列的第四个数字，Total += 3。</div><div>可以发现最后三个孩子的糖果总数依然是正确的，虽然Total 每次增加的糖果数量正好和当前孩子得到的糖果数是反序关系。</div><div>这种边遍历边修正的方法可以保证一次遍历，不需要O(n)空间下计算出Total的正确值。</div><div><br/></div><div><div style="box-sizing: border-box; margin-bottom: 16px; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: rgb(241, 247, 243);"><div style="box-sizing: border-box;"><pre style="box-sizing: border-box; font-family: 'small Monaco', Menlo, Consolas, 'Courier New', monospace; font-size: 12px; white-space: normal; padding: 0px; margin-top: 0px; margin-bottom: 10px; line-height: 1.428571429; word-break: break-all; word-wrap: break-word; background-color: rgb(238, 238, 238); border-top-width: 1px; border-right-width: 1px; border-bottom-width: 1px; border-left-width: 3px; border-top-style: solid; border-right-style: solid; border-bottom-style: solid; border-left-style: solid; border-top-color: rgb(221, 221, 221); border-right-color: rgb(221, 221, 221); border-bottom-color: rgb(221, 221, 221); border-left-color: rgb(221, 221, 221); border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; overflow: auto; width: 600px; max-height: 600px;"><code style="box-sizing: border-box; font-family: 'small Monaco', Menlo, Consolas, 'Courier New', monospace; font-size: inherit; padding: 8px; color: black; white-space: pre; background-color: transparent; border-top-left-radius: 4px; border-top-right-radius: 4px; border-bottom-right-radius: 4px; border-bottom-left-radius: 4px; border: 0px; display: block; float: left;"><span style="box-sizing: border-box; font-weight: bold;">int</span> candy(<span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">vector</span>&lt;<span style="box-sizing: border-box; font-weight: bold;">int</span>&gt;</span> &amp;ratings) {
    <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// Note: The Solution object is instantiated only once and is reused by each test case.</span>
    <span style="box-sizing: border-box; font-weight: bold;">int</span> nCandyCnt = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>;<span style="box-sizing: border-box; color: rgb(136, 136, 136);">///Total candies</span>
    <span style="box-sizing: border-box; font-weight: bold;">int</span> nSeqLen = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>;  <span style="box-sizing: border-box; color: rgb(136, 136, 136);">/// Continuous ratings descending sequence length</span>
    <span style="box-sizing: border-box; font-weight: bold;">int</span> nPreCanCnt = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>; <span style="box-sizing: border-box; color: rgb(136, 136, 136);">/// Previous child's candy count</span>
    <span style="box-sizing: border-box; font-weight: bold;">int</span> nMaxCntInSeq = nPreCanCnt;
    <span style="box-sizing: border-box; font-weight: bold;">if</span>(ratings.begin() != ratings.end())
    {
        nCandyCnt++;<span style="box-sizing: border-box; color: rgb(136, 136, 136);">//Counting the first child's candy.</span>
        <span style="box-sizing: border-box; font-weight: bold;">for</span>(<span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: bold;">vector</span>&lt;<span style="box-sizing: border-box; font-weight: bold;">int</span>&gt;</span>::iterator i = ratings.begin()+<span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>; i!= ratings.end(); i++)
        {
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// if r[k]&gt;r[k+1]&gt;r[k+2]...&gt;r[k+n],r[k+n]&lt;=r[k+n+1],</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// r[i] needs n-(i-k)+(Pre's) candies(k&lt;i&lt;k+n)</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// But if possible, we can allocate one candy to the child,</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// and with the sequence extends, add the child's candy by one</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// until the child's candy reaches that of the prev's.</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// Then increase the pre's candy as well.</span>

            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// if r[k] &lt; r[k+1], r[k+1] needs one more candy than r[k]</span>
            <span style="box-sizing: border-box; color: rgb(136, 136, 136);">// </span>
            <span style="box-sizing: border-box; font-weight: bold;">if</span>(*i &lt; *(i-<span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>))
            {
                <span style="box-sizing: border-box; color: rgb(136, 136, 136);">//Now we are in a sequence</span>
                nSeqLen++;
                <span style="box-sizing: border-box; font-weight: bold;">if</span>(nMaxCntInSeq == nSeqLen)
                {
                    <span style="box-sizing: border-box; color: rgb(136, 136, 136);">//The first child in the sequence has the same candy as the prev</span>
                    <span style="box-sizing: border-box; color: rgb(136, 136, 136);">//The prev should be included in the sequence.</span>
                    nSeqLen++;
                }
                nCandyCnt+= nSeqLen;
                nPreCanCnt = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>;
            }
            <span style="box-sizing: border-box; font-weight: bold;">else</span>
            {
                <span style="box-sizing: border-box; font-weight: bold;">if</span>(*i &gt; *(i-<span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>))
                { 
                    nPreCanCnt++;
                }
                <span style="box-sizing: border-box; font-weight: bold;">else</span>
                {
                    nPreCanCnt = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">1</span>;
                }
                nCandyCnt += nPreCanCnt;
                nSeqLen = <span style="box-sizing: border-box; color: rgb(0, 136, 0);">0</span>;
                nMaxCntInSeq = nPreCanCnt;
            }   
        }
    }
    <span style="box-sizing: border-box; font-weight: bold;">return</span> nCandyCnt;
}
</code></pre></div></div><span style="box-sizing: border-box; display: block; color: rgb(51, 51, 51); font-family: 'Helvetica Neue', Helvetica, Arial, sans-serif; font-size: 14px; line-height: 20px; text-align: left; background-color: rgb(241, 247, 243);"><span style="box-sizing: border-box; display: inline-block; vertical-align: middle; margin-right: 8px;"><img src="Candy_files/Image.jpg" type="image/jpeg" style="cursor: default;"/></span> <span style="box-sizing: border-box; display: inline-block; vertical-align: middle; font-size: 12px;"><a href="https://oj.leetcode.com/discuss/76/does-anyone-have-a-better-idea?show=101#a101" style="box-sizing: border-box; color: rgb(66, 139, 202); text-decoration: none;">answered</a> <span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;"><span style="box-sizing: border-box;">Oct 28, 2013</span></span> </span><span style="box-sizing: border-box;"><span style="box-sizing: border-box;">by </span><span style="box-sizing: border-box;"><span style="box-sizing: border-box;"><a href="https://oj.leetcode.com/discuss/user/Shangrila" style="box-sizing: border-box; color: rgb(59, 89, 152) !important; text-decoration: none; font-weight: 700;">Shangrila</a></span></span> <span style="box-sizing: border-box;"><span style="box-sizing: border-box;">(</span><span style="box-sizing: border-box;">35,250</span><span style="box-sizing: border-box;"> points)</span> </span></span><br style="box-sizing: border-box;"/><span style="box-sizing: border-box;">selected</span> <span style="box-sizing: border-box;"><span style="box-sizing: border-box; font-weight: 700;"><span style="box-sizing: border-box;">Oct 28, 2013</span></span> </span><span style="box-sizing: border-box;"><span style="box-sizing: border-box;">by </span><span style="box-sizing: border-box;"><a href="https://oj.leetcode.com/discuss/user/Yanqd" style="box-sizing: border-box; color: rgb(59, 89, 152) !important; text-decoration: none; font-weight: 700;">Yanqd</a></span></span></span></span></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div><div><br/></div></div>
</div></body></html> 